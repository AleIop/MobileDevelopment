{"ast":null,"code":"import * as firebase from \"firebase/app\";\nimport \"firebase/firestore\";\nconst firebaseConfig = {\n  apiKey: \"AIzaSyBXCX1Bb5S3OeJSmPsGr9B2J6iS9LVs2pQ\",\n  authDomain: \"mobut-project.firebaseapp.com\",\n  databaseURL: \"https://mobut-project.firebaseio.com\",\n  projectId: \"mobut-project\",\n  storageBucket: \"mobut-project.appspot.com\",\n  messagingSenderId: \"685766846531\",\n  appId: \"1:685766846531:web:39b5f7b9d38e6c22fdccf6\"\n}; // Initialize Firebase\n\nfirebase.initializeApp(firebaseConfig); // Listener for the players in the lobby\n\nlet lobbyListener;\n\nfunction addPlayerToLobby(player_object) {\n  let player_id = player_object.playerId; // player_name.replace(/\\s/g, '_');\n\n  return firebase.firestore().collection('lobby').doc(player_id).set({\n    playerName: player_object.playerName,\n    playerId: player_object.playerId,\n    imgURL: player_object.imgURL,\n    email: player_object.email,\n    ready: false\n  }).catch(function (error) {\n    console.error('Error adding a player to the lobby', error);\n  });\n}\n\nfunction stopListeningToLobby() {\n  if (lobbyListener !== undefined) {\n    lobbyListener();\n  }\n}\n\nfunction ListenToPlayersInLobby(callback) {\n  lobbyListener = firebase.firestore().collection(\"lobby\").onSnapshot(function (querySnapshot) {\n    var playersInLobby = [];\n    querySnapshot.forEach(function (doc) {\n      playersInLobby.push(doc.data());\n    });\n    callback(playersInLobby);\n  }, function onError(error) {\n    console.error(\"Error listening to lobby: \", error);\n  });\n}\n\nfunction ListenToPlayersInGame(callback) {\n  lobbyListener = firebase.firestore().collection(\"game\").onSnapshot(function (querySnapshot) {\n    var playersInLobby = [];\n    querySnapshot.forEach(function (doc) {\n      playersInLobby.push(doc.data());\n    });\n    callback(playersInLobby);\n  }, function onError(error) {\n    console.error(\"Error listening to lobby: \", error);\n  });\n}\n\nasync function getPlayersInLobby() {\n  var playersInLobby = [];\n  await firebase.firestore().collection(\"lobby\").get().then(querySnapshot => {\n    querySnapshot.forEach(function (doc) {\n      playersInLobby.push(doc.data());\n    });\n  });\n  console.log('Players', playersInLobby);\n  return playersInLobby;\n}\n\nfunction getPlayersInGame(game_id) {\n  return firebase.firestore().collection(\"games\").doc(game_id).get();\n}\n\nfunction removePlayerFromLobby(player_object) {\n  let player_id = player_object.playerId;\n  firebase.firestore().collection(\"lobby\").doc(player_id).delete().then(function () {\n    console.log(\"Player succesfully removed!\");\n  }).catch(function (error) {\n    console.error(\"Error removing lobby: \", error);\n  });\n}\n\nfunction removePlayerFromGame(game_id, player_id) {\n  getPlayersInGame(game_id).then(function (game) {\n    let players = game.players;\n    let new_players = [];\n    players.forEach(player => {\n      if (player.playerId !== player_id) {\n        new_players.push(player);\n      }\n    });\n    firebase.firestore().collection('games').doc(game_id).set({\n      players: new_players\n    }).then(function (docRef) {\n      console.log(\"Successfully removed the player with id: \", player_id);\n    }).catch(function (error) {\n      console.error('Error removing the player with id', player_id, \" error: \", error);\n    });\n  });\n}\n\nfunction removePlayersInLobby(playersInLobby) {\n  playersInLobby.forEach(function (player) {\n    removePlayerFromLobby(player.playerId);\n  });\n}\n\nfunction addPlayerToNewGame(player_object) {\n  let player_id = player_object.playerId;\n  firebase.firestore().collection('games').doc(player_id).set({\n    playerName: player_object.playerName,\n    playerId: player_object.playerId,\n    imgURL: player_object.imgURL,\n    email: player_object.email,\n    ready: false\n  }).then(function (docRef) {\n    removePlayerFromLobby(player_object);\n  }).catch(function (error) {\n    console.error('Error adding players to new game', error);\n  });\n}\n\nfunction removeAllPlayersInGame(playersInLobby) {\n  playersInLobby.forEach(function (player) {\n    removePlayerFromGame(player.playerId);\n  });\n}\n\nfunction addPlayersToNewGame(playersInLobby) {\n  firebase.firestore().collection('games').add({\n    players: playersInLobby\n  }).then(function (docRef) {\n    console.log(\"Successfully added players to newly created game with ID: \", docRef.id);\n    return playersInLobby;\n  }).catch(function (error) {\n    console.error('Error adding players to new game', error);\n  });\n}\n\nfunction createNewGame() {\n  return getPlayersInLobby().then(function (lobby) {\n    console.log('lobby :', lobby);\n    var playersInLobby = [];\n    lobby.forEach(function (doc) {\n      playersInLobby.push(doc.data());\n    });\n    console.log(\"players in lobby:\", playersInLobby);\n    return playersInLobby;\n  }).then(addPlayersToNewGame).then(removePlayersInLobby).catch(function (error) {\n    console.error(\"Error creating a new game:\", error);\n  });\n}\n\nfunction setPlayerReadyStatus(player_id, status) {\n  firebase.firestore().collection('lobby').doc(player_id).update({\n    ready: status\n  }).catch(error => {\n    console.error('Error setting the player ready status', error);\n  });\n}\n\nfunction createFakeLobby() {\n  addPlayerToLobby(\"DJ COW\", 'https://vignette.wikia.nocookie.net/pewdiepieminecraft/images/0/06/MushCow2.jpeg/revision/latest?cb=20190803151753');\n  addPlayerToLobby(\"Bengt\", 'https://vignette.wikia.nocookie.net/pewdiepieminecraft/images/e/e7/4C2C755B-FB01-4351-886E-077F5B03CF16.jpeg/revision/latest?cb=20190811175416');\n  addPlayerToLobby(\"Sven\", 'https://vignette.wikia.nocookie.net/pewdiepieminecraft/images/d/dd/Sven.png/revision/latest?cb=20191130204116');\n  addPlayerToLobby(\"Sven's BF\", 'https://vignette.wikia.nocookie.net/pewdiepieminecraft/images/b/ba/SvenYellow.jpeg/revision/latest?cb=20190814205003');\n  addPlayerToLobby(\"Water Sheep\", 'https://vignette.wikia.nocookie.net/pewdiepieminecraft/images/d/db/Water_Sheep%27s_Return.png/revision/latest?cb=20191129235246');\n  addPlayerToLobby(\"Ulla Britta\", 'https://vignette.wikia.nocookie.net/pewdiepieminecraft/images/6/6d/BCBBA22C-0452-4B35-8C67-52F8345D734F.jpeg/revision/latest?cb=20190805181119');\n  addPlayerToLobby(\"Flip Flop\", 'https://vignette.wikia.nocookie.net/pewdiepieminecraft/images/c/c7/Flip_Flop.jpeg/revision/latest?cb=20190922230718');\n} // TODO: any functions to handle the end of a game?\n\n\nexport { addPlayersToNewGame, createNewGame, ListenToPlayersInGame, addPlayerToLobby, createFakeLobby, removePlayerFromLobby, ListenToPlayersInLobby, getPlayersInLobby, setPlayerReadyStatus, stopListeningToLobby };","map":{"version":3,"sources":["/Users/Alessandro/Documents/GitHub/mobut-project/src/components/firebase-database.component.js"],"names":["firebase","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","initializeApp","lobbyListener","addPlayerToLobby","player_object","player_id","playerId","firestore","collection","doc","set","playerName","imgURL","email","ready","catch","error","console","stopListeningToLobby","undefined","ListenToPlayersInLobby","callback","onSnapshot","querySnapshot","playersInLobby","forEach","push","data","onError","ListenToPlayersInGame","getPlayersInLobby","get","then","log","getPlayersInGame","game_id","removePlayerFromLobby","delete","removePlayerFromGame","game","players","new_players","player","docRef","removePlayersInLobby","addPlayerToNewGame","removeAllPlayersInGame","addPlayersToNewGame","add","id","createNewGame","lobby","setPlayerReadyStatus","status","update","createFakeLobby"],"mappings":"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","sourcesContent":["import * as firebase from \"firebase/app\";\nimport \"firebase/firestore\";\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyBXCX1Bb5S3OeJSmPsGr9B2J6iS9LVs2pQ\",\n    authDomain: \"mobut-project.firebaseapp.com\",\n    databaseURL: \"https://mobut-project.firebaseio.com\",\n    projectId: \"mobut-project\",\n    storageBucket: \"mobut-project.appspot.com\",\n    messagingSenderId: \"685766846531\",\n    appId: \"1:685766846531:web:39b5f7b9d38e6c22fdccf6\"\n};\n\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\n\n// Listener for the players in the lobby\nlet lobbyListener;\n\n\n\nfunction addPlayerToLobby(player_object) {\n    let player_id = player_object.playerId;\n    // player_name.replace(/\\s/g, '_');\n    return firebase.firestore().collection('lobby').doc(player_id).set({\n        playerName: player_object.playerName,\n        playerId: player_object.playerId,\n        imgURL: player_object.imgURL,\n        email: player_object.email,\n        ready: false\n    })\n        .catch(function (error) {\n            console.error('Error adding a player to the lobby', error);\n        });\n}\n\nfunction stopListeningToLobby() {\n    if (lobbyListener !== undefined) {\n        lobbyListener();\n    }\n}\n\nfunction ListenToPlayersInLobby(callback) {\n    lobbyListener = firebase.firestore().collection(\"lobby\").onSnapshot(function (querySnapshot) {\n        var playersInLobby = [];\n        querySnapshot.forEach(function (doc) {\n            playersInLobby.push(doc.data());\n        });\n        callback(playersInLobby)\n    }, function onError(error) {\n        console.error(\"Error listening to lobby: \", error);\n    });\n}\n\nfunction ListenToPlayersInGame(callback) {\n    lobbyListener = firebase.firestore().collection(\"game\").onSnapshot(function (querySnapshot) {\n        var playersInLobby = [];\n        querySnapshot.forEach(function (doc) {\n            playersInLobby.push(doc.data());\n        });\n        callback(playersInLobby)\n    }, function onError(error) {\n        console.error(\"Error listening to lobby: \", error);\n    });\n}\n\nasync function getPlayersInLobby() {\n    var playersInLobby = [];\n    await firebase.firestore().collection(\"lobby\").get().then(querySnapshot => {\n        querySnapshot.forEach(function (doc) {\n            playersInLobby.push(doc.data());\n        });\n    });\n    console.log('Players', playersInLobby);\n    return playersInLobby;\n}\n\nfunction getPlayersInGame(game_id) {\n    return firebase.firestore().collection(\"games\").doc(game_id).get();\n}\n\nfunction removePlayerFromLobby(player_object) {\n    let player_id = player_object.playerId;\n    firebase.firestore().collection(\"lobby\").doc(player_id).delete().then(function () {\n        console.log(\"Player succesfully removed!\");\n    }).catch(function (error) {\n        console.error(\"Error removing lobby: \", error);\n    });\n}\n\nfunction removePlayerFromGame(game_id, player_id) {\n\n    getPlayersInGame(game_id)\n        .then(function (game) {\n            let players = game.players;\n            let new_players = [];\n            players.forEach(player => {\n                if (player.playerId !== player_id) {\n                    new_players.push(player);\n                }\n            });\n            firebase.firestore().collection('games').doc(game_id).set({\n                players: new_players\n            })\n                .then(function (docRef) {\n                    console.log(\"Successfully removed the player with id: \", player_id);\n                })\n                .catch(function (error) {\n                    console.error('Error removing the player with id', player_id, \" error: \", error);\n                });\n        })\n}\n\n\nfunction removePlayersInLobby(playersInLobby) {\n    playersInLobby.forEach(function (player) {\n        removePlayerFromLobby(player.playerId);\n    });\n}\n\nfunction addPlayerToNewGame(player_object) {\n    let player_id = player_object.playerId;\n    firebase.firestore().collection('games').doc(player_id).set({\n        playerName: player_object.playerName,\n        playerId: player_object.playerId,\n        imgURL: player_object.imgURL,\n        email: player_object.email,\n        ready: false\n    })\n        .then(function (docRef) {\n            removePlayerFromLobby(player_object);\n        })\n        .catch(function (error) {\n            console.error('Error adding players to new game', error);\n        });\n}\n\nfunction removeAllPlayersInGame(playersInLobby) {\n    playersInLobby.forEach(function (player) {\n        removePlayerFromGame(player.playerId);\n    });\n}\n\nfunction addPlayersToNewGame(playersInLobby) {\n    firebase.firestore().collection('games').add({\n        players: playersInLobby\n    })\n        .then(function (docRef) {\n            console.log(\"Successfully added players to newly created game with ID: \", docRef.id);\n            return playersInLobby;\n        })\n        .catch(function (error) {\n            console.error('Error adding players to new game', error);\n        });\n}\n\nfunction createNewGame() {\n    return getPlayersInLobby()\n        .then(function (lobby) {\n            console.log('lobby :', lobby);\n            var playersInLobby = [];\n            lobby.forEach(function (doc) {\n                playersInLobby.push(doc.data());\n            });\n            console.log(\"players in lobby:\", playersInLobby);\n            return playersInLobby;\n        })\n        .then(addPlayersToNewGame)\n        .then(removePlayersInLobby)\n        .catch(function (error) {\n            console.error(\"Error creating a new game:\", error);\n        });\n\n}\n\nfunction setPlayerReadyStatus(player_id, status) {\n    firebase.firestore()\n        .collection('lobby')\n        .doc(player_id)\n        .update({\n            ready: status\n        })\n        .catch((error) => {\n            console.error('Error setting the player ready status', error);\n        });\n\n}\n\nfunction createFakeLobby() {\n    addPlayerToLobby(\"DJ COW\", 'https://vignette.wikia.nocookie.net/pewdiepieminecraft/images/0/06/MushCow2.jpeg/revision/latest?cb=20190803151753');\n    addPlayerToLobby(\"Bengt\", 'https://vignette.wikia.nocookie.net/pewdiepieminecraft/images/e/e7/4C2C755B-FB01-4351-886E-077F5B03CF16.jpeg/revision/latest?cb=20190811175416');\n    addPlayerToLobby(\"Sven\", 'https://vignette.wikia.nocookie.net/pewdiepieminecraft/images/d/dd/Sven.png/revision/latest?cb=20191130204116');\n    addPlayerToLobby(\"Sven's BF\", 'https://vignette.wikia.nocookie.net/pewdiepieminecraft/images/b/ba/SvenYellow.jpeg/revision/latest?cb=20190814205003');\n    addPlayerToLobby(\"Water Sheep\", 'https://vignette.wikia.nocookie.net/pewdiepieminecraft/images/d/db/Water_Sheep%27s_Return.png/revision/latest?cb=20191129235246');\n    addPlayerToLobby(\"Ulla Britta\", 'https://vignette.wikia.nocookie.net/pewdiepieminecraft/images/6/6d/BCBBA22C-0452-4B35-8C67-52F8345D734F.jpeg/revision/latest?cb=20190805181119');\n    addPlayerToLobby(\"Flip Flop\", 'https://vignette.wikia.nocookie.net/pewdiepieminecraft/images/c/c7/Flip_Flop.jpeg/revision/latest?cb=20190922230718');\n}\n\n// TODO: any functions to handle the end of a game?\n\nexport {\n    addPlayersToNewGame,\n    createNewGame,\n    ListenToPlayersInGame,\n    addPlayerToLobby,\n    createFakeLobby,\n    removePlayerFromLobby,\n    ListenToPlayersInLobby,\n    getPlayersInLobby,\n    setPlayerReadyStatus,\n    stopListeningToLobby\n};\n"]},"metadata":{},"sourceType":"module"}