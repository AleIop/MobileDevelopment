{"ast":null,"code":"import _classCallCheck from\"/Users/Alessandro/Documents/GitHub/mobut-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Alessandro/Documents/GitHub/mobut-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/Alessandro/Documents/GitHub/mobut-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/Alessandro/Documents/GitHub/mobut-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'./App.css';import{createFakeLobby,setPlayerReadyStatus,ListenToPlayersInLobby,addPlayerToLobby,removePlayerFromLobby,removePlayerFromGame,addPlayerToNewGame,getPlayersInLobby,createNewGame,stopListeningToLobby,ListenToPlayersInGame}from\"./components/firebase-database.component\";import{signIn,initFirebaseAuth,signOut}from\"./components/firebase-authentication.component\";import Lobby from'./components/Lobby.js';import Home from'./components/Home.js';import MapView from'./components/MapView.js';import{Toast}from'react-onsenui';import{BrowserRouter as Router,Route,Switch,Redirect}from'react-router-dom';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={playersInLobby:[],lobbyPropsUpdate:false,toast:{open:false,timeout:2500,message:''},myLocation:{lat:0,lng:0},targetLocation:{lat:0,lng:0},user:{},redirect:false,path:\"/\",huntingPlayer:null};_this.authStateObserver=function(user){if(user){// User is signed in!,\n_this.setState({user:_this.getUserProps(user),redirect:true,path:'/lobby'});// console.log({ user }, ' signed in');\n}else{// User is signed out!\n_this.setState({user:{}});// console.log({ user }, ' signed out');\n}};_this.getUserIndex=function(list){for(var i=0;i<list.length;i++){var player=list[i];if(player.id===_this.state.user.id){return i;}}};_this.getUserProps=function(user){// console.log('Current user: ', { user });\nreturn{email:user.email,playerId:user.uid,playerName:_this.formatDisplayName(user.displayName),imgURL:user.photoURL};};_this.formatDisplayName=function(name){var maxLength=8;var firstName=_this.getFirstName(name);if(firstName.length>maxLength){return\"\".concat(firstName.slice(0,maxLength),\"...\");}else{return firstName;}};_this.getFirstName=function(name){return name.split(\" \")[0];};_this.playerInLobby=function(id){var allPlayers=_this.state.playersInLobby;var player;for(var i=0;i<allPlayers.length;i++){player=allPlayers[i];if(player.playerId===id){return true;}}return false;};_this.updateToastMessage=function(message){var toast=_this.state.toast;toast[\"message\"]=message;_this.setState({toast:toast});};_this.openToast=function(){var toast=_this.state.toast;toast[\"open\"]=true;_this.setState({toast:toast});setTimeout(function(){toast[\"open\"]=false;_this.setState({toast:toast});},_this.state.toast.timeout);};_this.renderRedirect=function(){if(_this.state.redirect){return/*#__PURE__*/React.createElement(Redirect,{push:true,to:{pathname:_this.state.path,state:{}}});}else{return/*#__PURE__*/React.createElement(React.Fragment,null);}};_this.signOut=function(){_this.setState({path:'/'});removePlayerFromLobby(_this.state.user);signOut();};_this.clearState=function(){_this.setState({huntingPlayer:null});};return _this;}_createClass(App,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.pubnub.unsubscribe({channels:['positionChannel']});}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.clearState();ListenToPlayersInLobby(function(data){_this2.setState({playersInLobby:data,lobbyPropsUpdate:!_this2.state.lobbyPropsUpdate});});// the way of Ale, He's so random\nListenToPlayersInGame(function(data){if(data.length>=2){var targetPlayer=data[Math.floor(Math.random()*data.length)];while(targetPlayer.playerId===_this2.state.user.playerId){targetPlayer=data[Math.floor(Math.random()*data.length)];}// console.log('Player: ',\n//         this.state.user,\n//         '\\nTarget player: ',\n//         {targetPlayer});\n_this2.setState({playersInGame:data,// chasedByPlayer:\nhuntingPlayer:targetPlayer,gamePropsUpdate:!_this2.state.gamePropsUpdate});}});initFirebaseAuth(this.authStateObserver);}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(Router,null,this.renderRedirect(),/*#__PURE__*/React.createElement(Route,{exact:true,render:function render(_ref){var location=_ref.location;return/*#__PURE__*/React.createElement(Switch,{location:location},/*#__PURE__*/React.createElement(Route,{exact:true,path:[\"/lobby\"],render:function render(props){var user=_this3.state.user;var userInLobby=_this3.playerInLobby(user.playerId);return/*#__PURE__*/React.createElement(Lobby,{user:user,userInLobby:userInLobby,allPlayers:_this3.state.playersInLobby,lobbyPropsUpdate:_this3.state.lobbyPropsUpdate,updatePlayerReadyState:setPlayerReadyStatus,addPlayerToLobbyFunc:addPlayerToLobby,removePlayerFromLobbyFunc:removePlayerFromLobby,updateToastMessage:_this3.updateToastMessage,openToast:_this3.openToast,debounceToast:_this3.state.toast.open,signOut:_this3.signOut,addPlayerToNewGame:addPlayerToNewGame});}}),/*#__PURE__*/React.createElement(Route,{exact:true,path:[\"/map\"]},/*#__PURE__*/React.createElement(MapView,{user:_this3.state.user,playersInGame:_this3.state.playersInGame,huntingPlayer:_this3.state.huntingPlayer,chasedByPlayer:_this3.state.chasedByPlayer,publishMyLocation:_this3.publishMyLocation,targetLocation:_this3.state.targetLocation,removePlayerFromGame:removePlayerFromGame})),/*#__PURE__*/React.createElement(Route,{exact:true,path:[\"/\",\"/index.html\",\"/*\"]},/*#__PURE__*/React.createElement(Home,{signIn:signIn,content:/*#__PURE__*/React.createElement(React.Fragment,null)})));}})),/*#__PURE__*/React.createElement(Toast,{isOpen:this.state.toast.open,animation:\"fall\",animationOptions:{duration:0.2,delay:0.4,timing:'ease-in'}},/*#__PURE__*/React.createElement(\"span\",null,this.state.toast.message)));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/Users/Alessandro/Documents/GitHub/mobut-project/src/App.js"],"names":["React","Component","createFakeLobby","setPlayerReadyStatus","ListenToPlayersInLobby","addPlayerToLobby","removePlayerFromLobby","removePlayerFromGame","addPlayerToNewGame","getPlayersInLobby","createNewGame","stopListeningToLobby","ListenToPlayersInGame","signIn","initFirebaseAuth","signOut","Lobby","Home","MapView","Toast","BrowserRouter","Router","Route","Switch","Redirect","App","state","playersInLobby","lobbyPropsUpdate","toast","open","timeout","message","myLocation","lat","lng","targetLocation","user","redirect","path","huntingPlayer","authStateObserver","setState","getUserProps","getUserIndex","list","i","length","player","id","email","playerId","uid","playerName","formatDisplayName","displayName","imgURL","photoURL","name","maxLength","firstName","getFirstName","slice","split","playerInLobby","allPlayers","updateToastMessage","openToast","setTimeout","renderRedirect","pathname","clearState","pubnub","unsubscribe","channels","data","targetPlayer","Math","floor","random","playersInGame","gamePropsUpdate","location","props","userInLobby","chasedByPlayer","publishMyLocation","duration","delay","timing"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport {\n    createFakeLobby,\n    setPlayerReadyStatus,\n    ListenToPlayersInLobby,\n    addPlayerToLobby,\n    removePlayerFromLobby,\n    removePlayerFromGame,\n    addPlayerToNewGame,\n    getPlayersInLobby,\n    createNewGame,\n    stopListeningToLobby,\n    ListenToPlayersInGame,\n} from \"./components/firebase-database.component\";\nimport {\n    signIn,\n    initFirebaseAuth,\n    signOut\n} from \"./components/firebase-authentication.component\";\nimport Lobby from './components/Lobby.js';\nimport Home from './components/Home.js';\nimport MapView from './components/MapView.js';\nimport { Toast } from 'react-onsenui';\nimport { BrowserRouter as Router, Route, Switch, Redirect } from 'react-router-dom';\n\n\nclass App extends Component {\n\n\n\n    componentWillUnmount() {\n        this.pubnub.unsubscribe({\n            channels: ['positionChannel']\n        });\n    }\n\n\n    state = {\n        playersInLobby: [],\n        lobbyPropsUpdate: false,\n        toast: {\n            open: false,\n            timeout: 2500,\n            message: ''\n        },\n        myLocation: {\n            lat: 0,\n            lng: 0\n        },\n        targetLocation: {\n            lat: 0,\n            lng: 0\n        },\n        user: {},\n        redirect: false,\n        path: \"/\",\n        huntingPlayer: null\n    };\n\n    authStateObserver = (user) => {\n        if (user) { // User is signed in!,\n            this.setState({\n                user: this.getUserProps(user),\n                redirect: true,\n                path: '/lobby'\n            });\n            // console.log({ user }, ' signed in');\n        } else { // User is signed out!\n            this.setState({\n                user: {},\n            });\n            // console.log({ user }, ' signed out');\n        }\n    };\n\n    componentDidMount() {\n        this.clearState();\n\n        ListenToPlayersInLobby((data) => {\n            this.setState({\n                playersInLobby: data,\n                lobbyPropsUpdate: (!(this.state.lobbyPropsUpdate))\n            });\n        });\n\n        // the way of Ale, He's so random\n        ListenToPlayersInGame((data) => {\n            if (data.length >= 2) {\n                let targetPlayer = data[Math.floor(Math.random() * data.length)];\n                while (targetPlayer.playerId === this.state.user.playerId) {\n                    targetPlayer = data[Math.floor(Math.random() * data.length)];\n                }\n\n                // console.log('Player: ',\n                //         this.state.user,\n                //         '\\nTarget player: ',\n                //         {targetPlayer});\n\n                this.setState({\n                    playersInGame: data,\n                    // chasedByPlayer:\n                    huntingPlayer: targetPlayer,\n                    gamePropsUpdate: (!(this.state.gamePropsUpdate))\n                });\n            }\n        });\n\n        initFirebaseAuth(this.authStateObserver);\n    }\n\n    getUserIndex = (list) => {\n        for (let i = 0; i < list.length; i++) {\n            const player = list[i];\n            if (player.id === this.state.user.id) {\n                return i;\n            }\n        }\n    };\n\n    getUserProps = (user) => {\n        // console.log('Current user: ', { user });\n        return {\n            email: user.email,\n            playerId: user.uid,\n            playerName: this.formatDisplayName(user.displayName),\n            imgURL: user.photoURL,\n        };\n    };\n\n    formatDisplayName = (name) => {\n        let maxLength = 8;\n        let firstName = this.getFirstName(name);\n        if (firstName.length > maxLength) {\n            return `${firstName.slice(0, maxLength)}...`;\n        } else {\n            return firstName;\n        }\n    };\n\n    getFirstName = (name) => {\n        return (name.split(\" \"))[0];\n    };\n\n    playerInLobby = (id) => {\n        const allPlayers = this.state.playersInLobby;\n        let player;\n        for (let i = 0; i < allPlayers.length; i++) {\n            player = allPlayers[i];\n            if (player.playerId === id) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    updateToastMessage = (message) => {\n        let toast = this.state.toast;\n        toast[\"message\"] = message;\n        this.setState({\n            toast: toast\n        })\n    };\n\n    openToast = () => {\n        let toast = this.state.toast;\n        toast[\"open\"] = true;\n        this.setState({\n            toast: toast\n        });\n        setTimeout(() => {\n            toast[\"open\"] = false;\n            this.setState({\n                toast: toast\n            });\n        }, this.state.toast.timeout)\n    };\n\n    renderRedirect = () => {\n        if (this.state.redirect) {\n            return <Redirect push to={{\n                pathname: this.state.path,\n                state: {\n\n                }\n            }} />\n        } else {\n            return <React.Fragment />\n        }\n    };\n\n    // Maybe not needed with the authStateObserver in componentDidMount\n    signOut = () => {\n        this.setState({\n            path: '/'\n        });\n        removePlayerFromLobby(this.state.user);\n        signOut();\n    };\n\n    // signIn = () => {\n    //     signIn().then(res => {\n    //         this.setState({\n    //             user: this.getUserProps(res.user),\n    //             page: 1,\n    //         })\n    //     });\n    // };\n\n    clearState = () => {\n        this.setState({\n            huntingPlayer: null,\n        })\n    };\n\n    render() {\n        return (\n            <div className=\"App\">\n                <Router>\n                    {this.renderRedirect()}\n                    <Route exact render={({ location }) => (\n                        <Switch location={location}>\n                            <Route exact path={[\"/lobby\"]} render={props => {\n                                const user = this.state.user;\n                                const userInLobby = this.playerInLobby(user.playerId)\n                                return (<Lobby\n                                    user={user}\n                                    userInLobby={userInLobby}\n                                    allPlayers={this.state.playersInLobby}\n                                    lobbyPropsUpdate={this.state.lobbyPropsUpdate}\n                                    updatePlayerReadyState={setPlayerReadyStatus}\n                                    addPlayerToLobbyFunc={addPlayerToLobby}\n                                    removePlayerFromLobbyFunc={removePlayerFromLobby}\n                                    updateToastMessage={this.updateToastMessage}\n                                    openToast={this.openToast}\n                                    debounceToast={this.state.toast.open}\n                                    signOut={this.signOut}\n                                    addPlayerToNewGame={addPlayerToNewGame}\n                                />);\n                            }} />\n                            <Route exact path={[\"/map\"]}>\n                                <MapView\n                                    user={this.state.user}\n                                    playersInGame={this.state.playersInGame}\n                                    huntingPlayer={this.state.huntingPlayer}\n                                    chasedByPlayer={this.state.chasedByPlayer}\n                                    publishMyLocation={this.publishMyLocation}\n                                    targetLocation={this.state.targetLocation}\n                                    removePlayerFromGame={removePlayerFromGame}\n                                />\n                            </Route>\n                            <Route exact path={[\"/\", \"/index.html\", \"/*\"]}>\n                                <Home\n                                    signIn={signIn}\n                                    content={\n                                        <React.Fragment>\n                                        </React.Fragment>\n                                    }\n                                />\n                            </Route>\n                        </Switch>\n                    )} />\n                </Router>\n                <Toast\n                    isOpen={this.state.toast.open}\n                    animation={\"fall\"}\n                    animationOptions={{ duration: 0.2, delay: 0.4, timing: 'ease-in' }}\n                >\n                    <span>{this.state.toast.message}</span>\n                </Toast>\n            </div>\n        );\n    }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}