{"ast":null,"code":"import _regeneratorRuntime from\"/Users/Alessandro/Documents/GitHub/mobut-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/Alessandro/Documents/GitHub/mobut-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import*as firebase from\"firebase/app\";import\"firebase/firestore\";var firebaseConfig={apiKey:\"AIzaSyBXCX1Bb5S3OeJSmPsGr9B2J6iS9LVs2pQ\",authDomain:\"mobut-project.firebaseapp.com\",databaseURL:\"https://mobut-project.firebaseio.com\",projectId:\"mobut-project\",storageBucket:\"mobut-project.appspot.com\",messagingSenderId:\"685766846531\",appId:\"1:685766846531:web:39b5f7b9d38e6c22fdccf6\"};// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);// Listener for the players in the lobby\nvar lobbyListener;function addPlayerToLobby(player_object){var player_id=player_object.playerId;// player_name.replace(/\\s/g, '_');\nreturn firebase.firestore().collection('lobby').doc(player_id).set({playerName:player_object.playerName,playerId:player_object.playerId,imgURL:player_object.imgURL,email:player_object.email,ready:false}).catch(function(error){console.error('Error adding a player to the lobby',error);});}function stopListeningToLobby(){if(lobbyListener!==undefined){lobbyListener();}}function ListenToPlayersInLobby(callback){lobbyListener=firebase.firestore().collection(\"lobby\").onSnapshot(function(querySnapshot){var playersInLobby=[];querySnapshot.forEach(function(doc){playersInLobby.push(doc.data());});callback(playersInLobby);},function onError(error){console.error(\"Error listening to lobby: \",error);});}function ListenToPlayersInGame(callback){lobbyListener=firebase.firestore().collection(\"game\").onSnapshot(function(querySnapshot){var playersInGame=[];querySnapshot.forEach(function(doc){playersInGame.push(doc.data());});callback(playersInGame);},function onError(error){console.error(\"Error listening to lobby: \",error);});}function getPlayersInLobby(){return _getPlayersInLobby.apply(this,arguments);}function _getPlayersInLobby(){_getPlayersInLobby=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var playersInLobby;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:playersInLobby=[];_context.next=3;return firebase.firestore().collection(\"lobby\").get().then(function(querySnapshot){querySnapshot.forEach(function(doc){playersInLobby.push(doc.data());});});case 3:console.log('Players',playersInLobby);return _context.abrupt(\"return\",playersInLobby);case 5:case\"end\":return _context.stop();}}},_callee);}));return _getPlayersInLobby.apply(this,arguments);}function getPlayersInGame(game_id){return firebase.firestore().collection(\"game\").doc(game_id).get();}function removePlayerFromLobby(player_object){var player_id=player_object.playerId;firebase.firestore().collection(\"lobby\").doc(player_id).delete().then(function(){console.log(\"Player succesfully removed!\");}).catch(function(error){console.error(\"Error removing lobby: \",error);});}function removePlayerFromGame(game_id,player_id){getPlayersInGame(game_id).then(function(game){var players=game.players;var new_players=[];players.forEach(function(player){if(player.playerId!==player_id){new_players.push(player);}});firebase.firestore().collection('game').doc(game_id).set({players:new_players}).then(function(docRef){console.log(\"Successfully removed the player with id: \",player_id);}).catch(function(error){console.error('Error removing the player with id',player_id,\" error: \",error);});});}function removePlayersInLobby(playersInLobby){playersInLobby.forEach(function(player){removePlayerFromLobby(player.playerId);});}function addPlayerToNewGame(player_object){var player_id=player_object.playerId;firebase.firestore().collection('game').doc(player_id).set({playerName:player_object.playerName,playerId:player_object.playerId,imgURL:player_object.imgURL,email:player_object.email,ready:false}).then(function(docRef){removePlayerFromLobby(player_object);}).catch(function(error){console.error('Error adding players to new game',error);});}function removeAllPlayersInGame(playersInLobby){playersInLobby.forEach(function(player){removePlayerFromGame(player.playerId);});}function addPlayersToNewGame(playersInLobby){firebase.firestore().collection('game').add({players:playersInLobby}).then(function(docRef){console.log(\"Successfully added players to newly created game with ID: \",docRef.id);return playersInLobby;}).catch(function(error){console.error('Error adding players to new game',error);});}function createNewGame(){return getPlayersInLobby().then(function(lobby){console.log('lobby :',lobby);var playersInLobby=[];lobby.forEach(function(doc){playersInLobby.push(doc.data());});console.log(\"players in lobby:\",playersInLobby);return playersInLobby;}).then(addPlayersToNewGame).then(removePlayersInLobby).catch(function(error){console.error(\"Error creating a new game:\",error);});}function setPlayerReadyStatus(player_id,status){firebase.firestore().collection('lobby').doc(player_id).update({ready:status}).catch(function(error){console.error('Error setting the player ready status',error);});}function createFakeLobby(){addPlayerToLobby(\"DJ COW\",'https://vignette.wikia.nocookie.net/pewdiepieminecraft/images/0/06/MushCow2.jpeg/revision/latest?cb=20190803151753');addPlayerToLobby(\"Bengt\",'https://vignette.wikia.nocookie.net/pewdiepieminecraft/images/e/e7/4C2C755B-FB01-4351-886E-077F5B03CF16.jpeg/revision/latest?cb=20190811175416');addPlayerToLobby(\"Sven\",'https://vignette.wikia.nocookie.net/pewdiepieminecraft/images/d/dd/Sven.png/revision/latest?cb=20191130204116');addPlayerToLobby(\"Sven's BF\",'https://vignette.wikia.nocookie.net/pewdiepieminecraft/images/b/ba/SvenYellow.jpeg/revision/latest?cb=20190814205003');addPlayerToLobby(\"Water Sheep\",'https://vignette.wikia.nocookie.net/pewdiepieminecraft/images/d/db/Water_Sheep%27s_Return.png/revision/latest?cb=20191129235246');addPlayerToLobby(\"Ulla Britta\",'https://vignette.wikia.nocookie.net/pewdiepieminecraft/images/6/6d/BCBBA22C-0452-4B35-8C67-52F8345D734F.jpeg/revision/latest?cb=20190805181119');addPlayerToLobby(\"Flip Flop\",'https://vignette.wikia.nocookie.net/pewdiepieminecraft/images/c/c7/Flip_Flop.jpeg/revision/latest?cb=20190922230718');}// TODO: any functions to handle the end of a game?\nexport{addPlayerToNewGame,createNewGame,ListenToPlayersInGame,addPlayerToLobby,createFakeLobby,removePlayerFromLobby,ListenToPlayersInLobby,getPlayersInLobby,setPlayerReadyStatus,stopListeningToLobby};","map":{"version":3,"sources":["/Users/Alessandro/Documents/GitHub/mobut-project/src/components/firebase-database.component.js"],"names":["firebase","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","initializeApp","lobbyListener","addPlayerToLobby","player_object","player_id","playerId","firestore","collection","doc","set","playerName","imgURL","email","ready","catch","error","console","stopListeningToLobby","undefined","ListenToPlayersInLobby","callback","onSnapshot","querySnapshot","playersInLobby","forEach","push","data","onError","ListenToPlayersInGame","playersInGame","getPlayersInLobby","get","then","log","getPlayersInGame","game_id","removePlayerFromLobby","delete","removePlayerFromGame","game","players","new_players","player","docRef","removePlayersInLobby","addPlayerToNewGame","removeAllPlayersInGame","addPlayersToNewGame","add","id","createNewGame","lobby","setPlayerReadyStatus","status","update","createFakeLobby"],"mappings":"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","sourcesContent":["import * as firebase from \"firebase/app\";\nimport \"firebase/firestore\";\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyBXCX1Bb5S3OeJSmPsGr9B2J6iS9LVs2pQ\",\n    authDomain: \"mobut-project.firebaseapp.com\",\n    databaseURL: \"https://mobut-project.firebaseio.com\",\n    projectId: \"mobut-project\",\n    storageBucket: \"mobut-project.appspot.com\",\n    messagingSenderId: \"685766846531\",\n    appId: \"1:685766846531:web:39b5f7b9d38e6c22fdccf6\"\n};\n\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\n\n// Listener for the players in the lobby\nlet lobbyListener;\n\n\n\nfunction addPlayerToLobby(player_object) {\n    let player_id = player_object.playerId;\n    // player_name.replace(/\\s/g, '_');\n    return firebase.firestore().collection('lobby').doc(player_id).set({\n        playerName: player_object.playerName,\n        playerId: player_object.playerId,\n        imgURL: player_object.imgURL,\n        email: player_object.email,\n        ready: false\n    })\n        .catch(function (error) {\n            console.error('Error adding a player to the lobby', error);\n        });\n}\n\nfunction stopListeningToLobby() {\n    if (lobbyListener !== undefined) {\n        lobbyListener();\n    }\n}\n\nfunction ListenToPlayersInLobby(callback) {\n    lobbyListener = firebase.firestore().collection(\"lobby\").onSnapshot(function (querySnapshot) {\n        var playersInLobby = [];\n        querySnapshot.forEach(function (doc) {\n            playersInLobby.push(doc.data());\n        });\n        callback(playersInLobby);\n    }, function onError(error) {\n        console.error(\"Error listening to lobby: \", error);\n    });\n}\n\nfunction ListenToPlayersInGame(callback) {\n    lobbyListener = firebase.firestore().collection(\"game\").onSnapshot(function (querySnapshot) {\n        var playersInGame = [];\n        querySnapshot.forEach(function (doc) {\n            playersInGame.push(doc.data());\n        });\n        callback(playersInGame);\n    }, function onError(error) {\n        console.error(\"Error listening to lobby: \", error);\n    });\n}\n\nasync function getPlayersInLobby() {\n    var playersInLobby = [];\n    await firebase.firestore().collection(\"lobby\").get().then(querySnapshot => {\n        querySnapshot.forEach(function (doc) {\n            playersInLobby.push(doc.data());\n        });\n    });\n    console.log('Players', playersInLobby);\n    return playersInLobby;\n}\n\nfunction getPlayersInGame(game_id) {\n    return firebase.firestore().collection(\"game\").doc(game_id).get();\n}\n\nfunction removePlayerFromLobby(player_object) {\n    let player_id = player_object.playerId;\n    firebase.firestore().collection(\"lobby\").doc(player_id).delete().then(function () {\n        console.log(\"Player succesfully removed!\");\n    }).catch(function (error) {\n        console.error(\"Error removing lobby: \", error);\n    });\n}\n\nfunction removePlayerFromGame(game_id, player_id) {\n\n    getPlayersInGame(game_id)\n        .then(function (game) {\n            let players = game.players;\n            let new_players = [];\n            players.forEach(player => {\n                if (player.playerId !== player_id) {\n                    new_players.push(player);\n                }\n            });\n            firebase.firestore().collection('game').doc(game_id).set({\n                players: new_players\n            })\n                .then(function (docRef) {\n                    console.log(\"Successfully removed the player with id: \", player_id);\n                })\n                .catch(function (error) {\n                    console.error('Error removing the player with id', player_id, \" error: \", error);\n                });\n        })\n}\n\n\nfunction removePlayersInLobby(playersInLobby) {\n    playersInLobby.forEach(function (player) {\n        removePlayerFromLobby(player.playerId);\n    });\n}\n\nfunction addPlayerToNewGame(player_object) {\n    let player_id = player_object.playerId;\n    firebase.firestore().collection('game').doc(player_id).set({\n        playerName: player_object.playerName,\n        playerId: player_object.playerId,\n        imgURL: player_object.imgURL,\n        email: player_object.email,\n        ready: false\n    })\n        .then(function (docRef) {\n            removePlayerFromLobby(player_object);\n        })\n        .catch(function (error) {\n            console.error('Error adding players to new game', error);\n        });\n}\n\nfunction removeAllPlayersInGame(playersInLobby) {\n    playersInLobby.forEach(function (player) {\n        removePlayerFromGame(player.playerId);\n    });\n}\n\nfunction addPlayersToNewGame(playersInLobby) {\n    firebase.firestore().collection('game').add({\n        players: playersInLobby\n    })\n        .then(function (docRef) {\n            console.log(\"Successfully added players to newly created game with ID: \", docRef.id);\n            return playersInLobby;\n        })\n        .catch(function (error) {\n            console.error('Error adding players to new game', error);\n        });\n}\n\nfunction createNewGame() {\n    return getPlayersInLobby()\n        .then(function (lobby) {\n            console.log('lobby :', lobby);\n            var playersInLobby = [];\n            lobby.forEach(function (doc) {\n                playersInLobby.push(doc.data());\n            });\n            console.log(\"players in lobby:\", playersInLobby);\n            return playersInLobby;\n        })\n        .then(addPlayersToNewGame)\n        .then(removePlayersInLobby)\n        .catch(function (error) {\n            console.error(\"Error creating a new game:\", error);\n        });\n\n}\n\nfunction setPlayerReadyStatus(player_id, status) {\n    firebase.firestore()\n        .collection('lobby')\n        .doc(player_id)\n        .update({\n            ready: status\n        })\n        .catch((error) => {\n            console.error('Error setting the player ready status', error);\n        });\n\n}\n\nfunction createFakeLobby() {\n    addPlayerToLobby(\"DJ COW\", 'https://vignette.wikia.nocookie.net/pewdiepieminecraft/images/0/06/MushCow2.jpeg/revision/latest?cb=20190803151753');\n    addPlayerToLobby(\"Bengt\", 'https://vignette.wikia.nocookie.net/pewdiepieminecraft/images/e/e7/4C2C755B-FB01-4351-886E-077F5B03CF16.jpeg/revision/latest?cb=20190811175416');\n    addPlayerToLobby(\"Sven\", 'https://vignette.wikia.nocookie.net/pewdiepieminecraft/images/d/dd/Sven.png/revision/latest?cb=20191130204116');\n    addPlayerToLobby(\"Sven's BF\", 'https://vignette.wikia.nocookie.net/pewdiepieminecraft/images/b/ba/SvenYellow.jpeg/revision/latest?cb=20190814205003');\n    addPlayerToLobby(\"Water Sheep\", 'https://vignette.wikia.nocookie.net/pewdiepieminecraft/images/d/db/Water_Sheep%27s_Return.png/revision/latest?cb=20191129235246');\n    addPlayerToLobby(\"Ulla Britta\", 'https://vignette.wikia.nocookie.net/pewdiepieminecraft/images/6/6d/BCBBA22C-0452-4B35-8C67-52F8345D734F.jpeg/revision/latest?cb=20190805181119');\n    addPlayerToLobby(\"Flip Flop\", 'https://vignette.wikia.nocookie.net/pewdiepieminecraft/images/c/c7/Flip_Flop.jpeg/revision/latest?cb=20190922230718');\n}\n\n// TODO: any functions to handle the end of a game?\n\nexport {\n    addPlayerToNewGame,\n    createNewGame,\n    ListenToPlayersInGame,\n    addPlayerToLobby,\n    createFakeLobby,\n    removePlayerFromLobby,\n    ListenToPlayersInLobby,\n    getPlayersInLobby,\n    setPlayerReadyStatus,\n    stopListeningToLobby\n};\n"]},"metadata":{},"sourceType":"module"}